/* =========================================================
   üèÜ MADABA ‚Äì UMNIAH STRICT ROUTING
   ASN Locked: AS35819
   Zero DIRECT | Production Optimized
   ========================================================= */

var PROXY_MAIN = "PROXY 176.29.153.95:20001";

/* =========================================================
   ‚ö° Optimized UMNIAH Networks (Cleaned + Merged)
   ========================================================= */

var UMNIAH_NETS = [

  ["2.17.24.0","255.255.252.0"],
  ["2.59.52.0","255.255.252.0"],
  ["5.45.128.0","255.255.240.0"],
  ["5.198.240.0","255.255.248.0"],
  ["5.199.184.0","255.255.252.0"],

  ["37.17.192.0","255.255.240.0"],
  ["37.44.32.0","255.255.248.0"],
  ["37.75.144.0","255.255.248.0"],
  ["37.123.64.0","255.255.224.0"],
  ["37.152.0.0","255.255.248.0"],
  ["37.202.64.0","255.255.192.0"],
  ["37.220.112.0","255.255.240.0"],

  ["46.23.112.0","255.255.240.0"],
  ["46.32.96.0","255.255.224.0"],
  ["46.185.128.0","255.255.128.0"],
  ["46.248.192.0","255.255.224.0"],

  ["62.72.160.0","255.255.224.0"],
  ["77.245.0.0","255.255.240.0"],
  ["79.134.128.0","255.255.224.0"],
  ["79.173.192.0","255.255.192.0"],

  ["80.90.160.0","255.255.240.0"],
  ["81.21.0.0","255.255.240.0"],
  ["81.28.112.0","255.255.240.0"],
  ["82.212.64.0","255.255.192.0"],

  ["84.18.32.0","255.255.224.0"],
  ["84.18.64.0","255.255.224.0"],
  ["85.159.216.0","255.255.248.0"],
  ["86.108.0.0","255.255.128.0"],

  ["91.106.96.0","255.255.240.0"],
  ["91.186.224.0","255.255.224.0"],
  ["92.241.32.0","255.255.224.0"],
  ["92.253.0.0","255.255.128.0"],

  ["94.127.208.0","255.255.248.0"],
  ["94.142.32.0","255.255.224.0"],
  ["94.249.0.0","255.255.128.0"],
  ["95.172.192.0","255.255.224.0"],

  ["109.107.224.0","255.255.224.0"],
  ["141.105.56.0","255.255.248.0"],
  ["149.200.128.0","255.255.128.0"],

  ["176.28.128.0","255.255.128.0"],
  ["176.29.0.0","255.255.0.0"],
  ["176.57.0.0","255.255.224.0"],
  ["176.57.48.0","255.255.240.0"],

  ["178.238.176.0","255.255.240.0"],

  ["185.12.244.0","255.255.252.0"],
  ["185.14.132.0","255.255.252.0"],
  ["185.19.112.0","255.255.252.0"],
  ["185.80.24.0","255.255.252.0"],
  ["185.98.220.0","255.255.248.0"],

  ["188.123.160.0","255.255.224.0"],
  ["188.247.64.0","255.255.224.0"],

  ["193.188.64.0","255.255.224.0"],
  ["194.165.128.0","255.255.224.0"],

  ["212.34.0.0","255.255.224.0"],
  ["212.35.64.0","255.255.224.0"],
  ["212.118.0.0","255.255.224.0"],

  ["213.139.32.0","255.255.224.0"],
  ["213.186.160.0","255.255.224.0"],

  ["217.23.32.0","255.255.192.0"],
  ["217.29.240.0","255.255.192.0"],
  ["217.144.0.0","255.255.192.0"]

];

/* =========================================================
   ‚ö° Fast Detection Engine
   ========================================================= */

function isUmniahIP(ip) {

  for (var i = 0; i < UMNIAH_NETS.length; i++) {
    if (isInNet(ip, UMNIAH_NETS[i][0], UMNIAH_NETS[i][1])) {
      return true;
    }
  }

  return false;
}

function isUmniah(host) {

  var ip = dnsResolve(host);
  if (!ip) return false;

  return isUmniahIP(ip);
}

/* =========================================================
   üöÄ MAIN ROUTING ENGINE
   ========================================================= */

function FindProxyForURL(url, host) {

  /* Avoid DNS loop for plain IP */
  if (isResolvable(host) == false && isInNet(host, "0.0.0.0", "0.0.0.0")) {
    return PROXY_MAIN;
  }

  if (isUmniah(host)) {
    return PROXY_MAIN;
  }

  /* Zero DIRECT Policy */
  return PROXY_MAIN;
}
